<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-content">
    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col-lg-6">
          <div class="hero-text">
            <h1 class="hero-title">Welcome to ECommerce Platform</h1>
            <p class="hero-subtitle">Discover amazing products at unbeatable prices. Shop with confidence and enjoy fast, free delivery.</p>
            <button mat-raised-button color="primary" size="large" class="hero-cta" (click)="onShopNowClick()">
              <mat-icon>shopping_cart</mat-icon>
              Shop Now
            </button>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="hero-image">
            <img src="/assets/images/hero-shopping.svg" alt="Shopping Hero" class="img-fluid">
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
  <div class="container-fluid">
    <div class="section-header">
      <h2>Shop by Category</h2>
      <p>Explore our wide range of product categories</p>
    </div>
    
    <div class="categories-grid">
      <mat-card 
        *ngFor="let category of categories$ | async" 
        class="category-card"
        (click)="onCategoryClick(category)"
        role="button"
        tabindex="0">
        <mat-card-content>
          <div class="category-icon">
            <mat-icon>category</mat-icon>
          </div>
          <h3>{{ category.name }}</h3>
          <p *ngIf="category.description">{{ category.description }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</section>

<!-- Featured Products Section -->
<section class="featured-products-section">
  <div class="container-fluid">
    <div class="section-header">
      <h2>Featured Products</h2>
      <p>Check out our most popular items</p>
    </div>
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center py-4">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="mt-2 text-muted">Loading featured products...</p>
    </div>

    <!-- Products Grid -->
    <div *ngIf="!isLoading" class="products-grid">
      <mat-card 
        *ngFor="let product of products" 
        class="product-card"
        [style.cursor]="'pointer'"
        (click)="onProductClick(product)">
        
        <div class="product-image">
          <img [src]="getProductImageUrl(product)" [alt]="product.name" loading="lazy">
          <div class="product-badges">
            <!-- Sale Badge -->
            <mat-chip class="sale-badge" *ngIf="product.onSale">
              {{ product.savingsPercentage | number:'1.0-0' }}% OFF
            </mat-chip>
            <!-- Stock Status Badge -->
            <mat-chip class="stock-badge" 
                     [ngClass]="{'bg-success': canAddToCart(product), 'bg-warning': isLowStock(product) && canAddToCart(product), 'bg-danger': !canAddToCart(product)}" 
                     *ngIf="!canAddToCart(product) || isLowStock(product)">
              {{ getStockStatusText(product) }}
            </mat-chip>
          </div>
        </div>
        
        <mat-card-content class="product-info">
          <h3 class="product-name">{{ product.name | slice:0:50 }}{{ product.name.length > 50 ? '...' : '' }}</h3>
          <p class="product-brand">{{ product.brand }}</p>
          
          <div class="product-rating" *ngIf="product.stars">
            <div class="stars">
              <mat-icon *ngFor="let star of [1,2,3,4,5]" 
                       [class.filled]="star <= (product.stars || 0)">
                star
              </mat-icon>
            </div>
            <span class="rating-count">({{ product.reviewCount || 0 }})</span>
          </div>
          
          <div class="product-pricing">
            <span class="current-price">{{ formatPrice(product.price) }}</span>
            <span class="original-price" *ngIf="product.compareAtPrice && product.compareAtPrice > product.price">
              {{ formatPrice(product.compareAtPrice) }}
            </span>
          </div>

          <!-- Stock Info -->
          <div class="stock-info" *ngIf="isLowStock(product) && canAddToCart(product)">
            <small class="text-warning">
              <mat-icon class="small-icon">warning</mat-icon>
              Only {{ getAvailableQuantity(product) }} left
            </small>
          </div>
        </mat-card-content>
        
        <mat-card-actions class="product-actions">
          <button mat-raised-button 
                 [color]="canAddToCart(product) ? 'primary' : 'warn'"
                 [disabled]="!canAddToCart(product)"
                 class="add-to-cart-btn" 
                 (click)="onAddToCart(product, $event)">
            <mat-icon>{{ canAddToCart(product) ? 'add_shopping_cart' : 'remove_shopping_cart' }}</mat-icon>
            {{ getAddToCartButtonText(product) }}
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- No Products Message -->
    <div *ngIf="!isLoading && products.length === 0" class="text-center py-4">
      <mat-icon class="text-muted" style="font-size: 3rem; width: 3rem; height: 3rem;">inventory_2</mat-icon>
      <h3 class="text-muted mt-2">No products available</h3>
      <p class="text-muted">All featured products are currently out of stock</p>
    </div>
    
    <div class="text-center mt-4">
      <button mat-stroked-button color="primary" routerLink="/products">
        View All Products
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>
  </div>
</section>

<!-- Features Section -->
<section class="features-section">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="feature-item">
          <mat-icon class="feature-icon">local_shipping</mat-icon>
          <h4>Free Shipping</h4>
          <p>Free shipping on orders over $50</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="feature-item">
          <mat-icon class="feature-icon">security</mat-icon>
          <h4>Secure Payment</h4>
          <p>100% secure payment processing</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="feature-item">
          <mat-icon class="feature-icon">support_agent</mat-icon>
          <h4>24/7 Support</h4>
          <p>Round-the-clock customer support</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="feature-item">
          <mat-icon class="feature-icon">cached</mat-icon>
          <h4>Easy Returns</h4>
          <p>30-day hassle-free returns</p>
        </div>
      </div>
    </div>
  </div>
</section>